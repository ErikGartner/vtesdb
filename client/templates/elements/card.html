<template name="card">
    <div class="fluid ui special card">

      <div class="ui blurring dimmable rounded image card-image">
            <div class="ui dimmer">
              <div class="content card-text">
                <div class="center">
                  <p>
                  <h3>{{name}}</h3>
                  {{#if isCryptCard}}
                    {{clan}} {{capacity}} {{disciplines}}
                  {{else}}
                      {{type}} {{clan}} {{requirement}}
                      {{#if poolCost}}
                        Pool: {{poolCost}}
                      {{/if}}
                      {{#if bloodCost}}
                        Blood: {{bloodCost}}
                      {{/if}}
                    {{/if}}
                  </p>
                  <p>{{text}}</p>
                </div>
              </div>
            </div>
            <img src="/cards/{{cardId}}.jpg" onerror="this.src='/cardback.jpg'">
      </div>

      <div class="content">
        <p class="header">{{name}}</p>
        <div class="description">
          <a class="inventory-button">
            {{inventoryCount}}
            <i class="star link icon"></i>
          </a>

          <div class="ui flowing inv popup">
            <form class='set-inv'>
              <div class="ui input">
                <input title="Inventory" class="badge-input" name="count" type="text" placeholder={{inventoryCount}}>
              </div>
              <input type='hidden' name='id' value='{{cardId}}'/>
              <input type="submit" style="visibility: hidden;" />
            </form>
          </div>

          {{> deckControl}}

          {{#if banned}}
            <i title="Banned" class="red remove icon"></i>
          {{/if}}
          {{#if rulings}}
            <i class="warning circle icon rulings-icon"></i>

            <div class="fluid ui popup inverted ruling-popup">
              <div class="header">Rulings</div>
              <div class="ui list">
                {{#each rulings}}
                  <li class="item">
                    <i class="right triangle icon"></i>
                    {{this}}
                  </li>
                {{/each}}
              </div>
            </div>
          {{/if}}
        </div>
      </div>
      <div class="extra content">
        <emph>{{set}}</emph>
      </div>
    </div>

</template>

<template name="cardSearch">
  <div class="fluid ui icon input">
    {{> EasySearch.Input index=CardsIndex placeholder="Search..." class="form-control" limit=3}}
    <i class="search icon"></i>
  </div>

  {{#EasySearch.Each index=CardsIndex}}
    {{> bareCard}}
  {{/EasySearch.Each}}

  <div class="ui two column centered grid">
    <div class="column">
      {{> EasySearch.LoadMore index=CardsIndex attributes=loadMoreAttributes}}
    </div>
  </div>
</template>

<template name="bareCard">
  <div class="ui card">
    <div class="content">
      <p class="header">{{name}}</p>
      <div class="meta">
        {{#if isCryptCard}}
          {{clan}} {{capacity}} {{disciplines}}
        {{else}}
            {{type}} {{clan}} {{requirement}}
            {{#if poolCost}}
              Pool: {{poolCost}}
            {{/if}}
            {{#if bloodCost}}
              Blood: {{bloodCost}}
            {{/if}}
          {{/if}}
      </div>
      <div class="description">
        <p>{{text}}</p>

        {{#if banned}}
          <i title="Banned" class="red remove icon"></i>
        {{/if}}
        {{#if rulings}}
          <i class="warning circle icon rulings-icon"></i>

          <div class="fluid ui popup inverted ruling-popup">
            <div class="header">Rulings</div>
            <div class="ui list">
              {{#each rulings}}
                <li class="item">
                  <i class="right triangle icon"></i>
                  {{this}}
                </li>
              {{/each}}
            </div>
          </div>
        {{/if}}
      </div>
    </div>
    <div class="extra content">
      <form class='set-card' action="#">
        <div class="ui fluid action input">
          <input title="Count" class="badge-input" name="count" type="text" value={{cardCount}}>
          <button type="submit" class="ui green right icon button">
            <i class="check icon"></i>
          </button>
        </div>
        <input type='hidden' name='id' value='{{cardId}}'/>
      </form>
    </div>
  </div>
</template>
